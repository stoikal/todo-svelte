(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function S(){}function de(t){return t()}function ie(){return Object.create(null)}function L(t){t.forEach(de)}function me(t){return typeof t=="function"}function Y(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ge(t){return Object.keys(t).length===0}function g(t,e){t.appendChild(e)}function k(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode&&t.parentNode.removeChild(t)}function b(t){return document.createElement(t)}function R(t){return document.createTextNode(t)}function E(){return R(" ")}function C(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function be(t){return Array.from(t.childNodes)}function Z(t,e){e=""+e,t.data!==e&&(t.data=e)}function $e(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,o,e),r}let j;function M(t){j=t}function he(){if(!j)throw new Error("Function called outside component initialization");return j}function ye(t){he().$$.on_mount.push(t)}function _e(){const t=he();return(e,n,{cancelable:o=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=$e(e,n,{cancelable:o});return r.slice().forEach(l=>{l.call(t,s)}),!s.defaultPrevented}return!0}}const P=[],se=[];let T=[];const le=[],we=Promise.resolve();let U=!1;function ke(){U||(U=!0,we.then(pe))}function W(t){T.push(t)}const G=new Set;let O=0;function pe(){if(O!==0)return;const t=j;do{try{for(;O<P.length;){const e=P[O];O++,M(e),ve(e.$$)}}catch(e){throw P.length=0,O=0,e}for(M(null),P.length=0,O=0;se.length;)se.pop()();for(let e=0;e<T.length;e+=1){const n=T[e];G.has(n)||(G.add(n),n())}T.length=0}while(P.length);for(;le.length;)le.pop()();U=!1,G.clear(),M(t)}function ve(t){if(t.fragment!==null){t.update(),L(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(W)}}function Ee(t){const e=[],n=[];T.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),T=e}const B=new Set;let N;function Ne(){N={r:0,c:[],p:N}}function Se(){N.r||L(N.c),N=N.p}function I(t,e){t&&t.i&&(B.delete(t),t.i(e))}function A(t,e,n,o){if(t&&t.o){if(B.has(t))return;B.add(t),N.c.push(()=>{B.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function De(t,e){A(t,1,1,()=>{e.delete(t.key)})}function Oe(t,e,n,o,r,s,l,i,u,c,d,h){let f=t.length,a=s.length,m=f;const D={};for(;m--;)D[t[m].key]=m;const v=[],V=new Map,z=new Map,ne=[];for(m=a;m--;){const _=h(r,s,m),$=n(_);let y=l.get($);y?o&&ne.push(()=>y.p(_,e)):(y=c($,_),y.c()),V.set($,v[m]=y),$ in D&&z.set($,Math.abs(m-D[$]))}const oe=new Set,re=new Set;function K(_){I(_,1),_.m(i,d),l.set(_.key,_),d=_.first,a--}for(;f&&a;){const _=v[a-1],$=t[f-1],y=_.key,q=$.key;_===$?(d=_.first,f--,a--):V.has(q)?!l.has(y)||oe.has(y)?K(_):re.has(q)?f--:z.get(y)>z.get(q)?(re.add(y),K(_)):(oe.add(q),f--):(u($,l),f--)}for(;f--;){const _=t[f];V.has(_.key)||u(_,l)}for(;a;)K(v[a-1]);return L(ne),v}function X(t){t&&t.c()}function H(t,e,n,o){const{fragment:r,after_update:s}=t.$$;r&&r.m(e,n),o||W(()=>{const l=t.$$.on_mount.map(de).filter(me);t.$$.on_destroy?t.$$.on_destroy.push(...l):L(l),t.$$.on_mount=[]}),s.forEach(W)}function F(t,e){const n=t.$$;n.fragment!==null&&(Ee(n.after_update),L(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Pe(t,e){t.$$.dirty[0]===-1&&(P.push(t),ke(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ee(t,e,n,o,r,s,l,i=[-1]){const u=j;M(t);const c=t.$$={fragment:null,ctx:[],props:s,update:S,not_equal:r,bound:ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:ie(),dirty:i,skip_bound:!1,root:e.target||u.$$.root};l&&l(c.root);let d=!1;if(c.ctx=n?n(t,e.props||{},(h,f,...a)=>{const m=a.length?a[0]:f;return c.ctx&&r(c.ctx[h],c.ctx[h]=m)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](m),d&&Pe(t,h)),f}):[],c.update(),d=!0,L(c.before_update),c.fragment=o?o(c.ctx):!1,e.target){if(e.hydrate){const h=be(e.target);c.fragment&&c.fragment.l(h),h.forEach(w)}else c.fragment&&c.fragment.c();e.intro&&I(t.$$.fragment),H(t,e.target,e.anchor,e.customElement),pe()}M(u)}class te{$destroy(){F(this,1),this.$destroy=S}$on(e,n){if(!me(n))return S;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(e){this.$$set&&!ge(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Te=t=>new Promise((e,n)=>{const{dbName:o,dbVersion:r,storeName:s,initialData:l}=t,i=window.indexedDB.open(o,r);i.onerror=()=>{n(new Error("Database error"))},i.onupgradeneeded=u=>{const c=u.target.result;if(!c.objectStoreNames.contains(s)){const h=c.createObjectStore(s,{keyPath:"id",autoIncrement:!0});l.length&&l.forEach(f=>{h.add(f)})}},i.onsuccess=u=>{const c=u.target.result;e(c)}}),J={dbName:"todoDb",dbVersion:1,storeName:"todoStore",initialData:[{title:"make todo app",parent:null,is_done:!0},{title:"deploy to github pages",parent:null,is_done:!0},{title:"take a nap",parent:null,is_done:!1}]},x=async(t="readonly")=>(await Te(J)).transaction([J.storeName],t).objectStore(J.storeName),Q={async getAll(){const t=await x();return new Promise((e,n)=>{const o=t.getAll();o.onsuccess=()=>e(o.result),o.onerror=()=>n(o.error)})},async create(t){const e=await x("readwrite");return new Promise((n,o)=>{const r=e.add(t);r.onsuccess=()=>n(r.result),r.onerror=()=>o(r.error)})},async patch(t,e){const n=await x("readwrite");return new Promise((o,r)=>{const s=n.get(t);s.onsuccess=()=>{const l=s.result;Object.entries(e).forEach(([u,c])=>{l[u]=c});const i=n.put(l);i.onsuccess=()=>o(i.result),i.onerror=()=>r(i.error)},s.onerror=()=>r(s.error)})},async setIsDone(t,e){return this.patch(t,{is_done:e})},async delete(t){const e=await x("readwrite");return new Promise((n,o)=>{const r=e.delete(t);r.onsuccess=()=>{n()},r.onerror=()=>o(r.error)})}};function Ie(t){let e,n,o;return{c(){e=b("button"),e.innerHTML='<div class="i-ph-circle-bold">no</div>',p(e,"class","bg-transparent p-2")},m(r,s){k(r,e,s),n||(o=C(e,"click",t[1]),n=!0)},p:S,d(r){r&&w(e),n=!1,o()}}}function Le(t){let e,n,o;return{c(){e=b("button"),e.innerHTML='<div class="i-ph-check-circle-fill">done</div>',p(e,"class","bg-transparent p-2")},m(r,s){k(r,e,s),n||(o=C(e,"click",t[1]),n=!0)},p:S,d(r){r&&w(e),n=!1,o()}}}function Me(t){let e,n=t[0].title+"",o,r,s;return{c(){e=b("button"),o=R(n),p(e,"class","bg-transparent grow-1 text-left")},m(l,i){k(l,e,i),g(e,o),r||(s=C(e,"click",t[1]),r=!0)},p(l,i){i&1&&n!==(n=l[0].title+"")&&Z(o,n)},d(l){l&&w(e),r=!1,s()}}}function je(t){let e,n=t[0].title+"",o,r,s;return{c(){e=b("button"),o=R(n),p(e,"class","bg-transparent line-through grow-1 text-left")},m(l,i){k(l,e,i),g(e,o),r||(s=C(e,"click",t[1]),r=!0)},p(l,i){i&1&&n!==(n=l[0].title+"")&&Z(o,n)},d(l){l&&w(e),r=!1,s()}}}function Ae(t){let e,n,o,r,s,l;function i(a,m){return a[0].is_done?Le:Ie}let u=i(t),c=u(t);function d(a,m){return a[0].is_done?je:Me}let h=d(t),f=h(t);return{c(){e=b("div"),c.c(),n=E(),f.c(),o=E(),r=b("button"),r.innerHTML='<div class="i-ph-trash"></div>',p(r,"class","bg-transparent pl-2"),p(e,"class","flex items-center")},m(a,m){k(a,e,m),c.m(e,null),g(e,n),f.m(e,null),g(e,o),g(e,r),s||(l=C(r,"click",t[2]),s=!0)},p(a,[m]){u===(u=i(a))&&c?c.p(a,m):(c.d(1),c=u(a),c&&(c.c(),c.m(e,n))),h===(h=d(a))&&f?f.p(a,m):(f.d(1),f=h(a),f&&(f.c(),f.m(e,o)))},i:S,o:S,d(a){a&&w(e),c.d(),f.d(),s=!1,l()}}}function Ce(t,e,n){const o=_e();let{item:r}=e;function s(){o("click",r)}function l(){o("delete",r)}return t.$$set=i=>{"item"in i&&n(0,r=i.item)},[r,s,l]}class qe extends te{constructor(e){super(),ee(this,e,Ce,Ae,Y,{item:0})}}function ce(t,e,n){const o=t.slice();return o[4]=e[n],o}function ue(t,e){let n,o,r,s;return o=new qe({props:{item:e[4]}}),o.$on("click",e[1]),o.$on("delete",e[2]),{key:t,first:null,c(){n=b("li"),X(o.$$.fragment),r=E(),this.first=n},m(l,i){k(l,n,i),H(o,n,null),g(n,r),s=!0},p(l,i){e=l;const u={};i&1&&(u.item=e[4]),o.$set(u)},i(l){s||(I(o.$$.fragment,l),s=!0)},o(l){A(o.$$.fragment,l),s=!1},d(l){l&&w(n),F(o)}}}function xe(t){let e,n=[],o=new Map,r,s=t[0];const l=i=>i[4].id;for(let i=0;i<s.length;i+=1){let u=ce(t,s,i),c=l(u);o.set(c,n[i]=ue(c,u))}return{c(){e=b("ul");for(let i=0;i<n.length;i+=1)n[i].c();p(e,"class","mb-6")},m(i,u){k(i,e,u);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);r=!0},p(i,[u]){u&7&&(s=i[0],Ne(),n=Oe(n,u,l,1,i,s,o,e,De,ue,null,ce),Se())},i(i){if(!r){for(let u=0;u<s.length;u+=1)I(n[u]);r=!0}},o(i){for(let u=0;u<n.length;u+=1)A(n[u]);r=!1},d(i){i&&w(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function Be(t,e,n){const o=_e();let{items:r}=e;function s(i){o("itemtoggle",i.detail)}function l(i){o("itemdelete",i.detail)}return t.$$set=i=>{"items"in i&&n(0,r=i.items)},[r,s,l]}class ae extends te{constructor(e){super(),ee(this,e,Be,xe,Y,{items:0})}}function fe(t){let e;return{c(){e=b("h2"),e.textContent="Done",p(e,"font","bold"),p(e,"text","lg"),p(e,"m","b-2")},m(n,o){k(n,e,o)},d(n){n&&w(e)}}}function He(t){let e,n,o,r=(console.log(t[1]),""),s,l,i,u,c,d,h;i=new ae({props:{items:t[1]}}),i.$on("itemtoggle",t[2]),i.$on("itemdelete",t[3]);let f=t[0].length&&fe();return d=new ae({props:{items:t[0]}}),d.$on("itemtoggle",t[2]),d.$on("itemdelete",t[3]),{c(){e=b("main"),n=b("h2"),n.textContent="Todo",o=E(),s=R(r),l=E(),X(i.$$.fragment),u=E(),f&&f.c(),c=E(),X(d.$$.fragment),p(n,"font","bold"),p(n,"text","lg"),p(n,"m","b-2"),p(e,"max-w","md"),p(e,"h","full"),p(e,"m","x-auto"),p(e,"p","4"),p(e,"relative","~")},m(a,m){k(a,e,m),g(e,n),g(e,o),g(e,s),g(e,l),H(i,e,null),g(e,u),f&&f.m(e,null),g(e,c),H(d,e,null),h=!0},p(a,[m]){(!h||m&2)&&r!==(r=(console.log(a[1]),""))&&Z(s,r);const D={};m&2&&(D.items=a[1]),i.$set(D),a[0].length?f||(f=fe(),f.c(),f.m(e,c)):f&&(f.d(1),f=null);const v={};m&1&&(v.items=a[0]),d.$set(v)},i(a){h||(I(i.$$.fragment,a),I(d.$$.fragment,a),h=!0)},o(a){A(i.$$.fragment,a),A(d.$$.fragment,a),h=!1},d(a){a&&w(e),F(i),f&&f.d(),F(d)}}}function Fe(t,e,n){let o,r,s=[];ye(()=>{l()});async function l(){const c=await Q.getAll();n(4,s=c)}async function i(c){const d=c.detail;await Q.setIsDone(d.id,!d.is_done),l()}async function u(c){const d=c.detail;await Q.delete(d.id),l()}return t.$$.update=()=>{t.$$.dirty&16&&n(1,o=s.filter(c=>!c.is_done)),t.$$.dirty&16&&n(0,r=s.filter(c=>c.is_done))},[r,o,i,u,s]}class Re extends te{constructor(e){super(),ee(this,e,Fe,He,Y,{})}}new Re({target:document.getElementById("app")});
