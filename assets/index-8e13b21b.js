(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function N(){}function X(e){return e()}function H(){return Object.create(null)}function E(e){e.forEach(X)}function Y(e){return typeof e=="function"}function Z(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ce(e){return Object.keys(e).length===0}function j(e,t){e.appendChild(t)}function R(e,t,n){e.insertBefore(t,n||null)}function D(e){e.parentNode&&e.parentNode.removeChild(e)}function A(e){return document.createElement(e)}function ee(e){return document.createTextNode(e)}function te(){return ee(" ")}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ae(e){return Array.from(e.childNodes)}function le(e,t){t=""+t,e.data!==t&&(e.data=t)}let S;function x(e){S=e}function ue(){if(!S)throw new Error("Function called outside component initialization");return S}function fe(e){ue().$$.on_mount.push(e)}const $=[],J=[];let b=[];const Q=[],de=Promise.resolve();let T=!1;function he(){T||(T=!0,de.then(ne))}function F(e){b.push(e)}const C=new Set;let w=0;function ne(){if(w!==0)return;const e=S;do{try{for(;w<$.length;){const t=$[w];w++,x(t),me(t.$$)}}catch(t){throw $.length=0,w=0,t}for(x(null),$.length=0,w=0;J.length;)J.pop()();for(let t=0;t<b.length;t+=1){const n=b[t];C.has(n)||(C.add(n),n())}b.length=0}while($.length);for(;Q.length;)Q.pop()();T=!1,C.clear(),x(e)}function me(e){if(e.fragment!==null){e.update(),E(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(F)}}function _e(e){const t=[],n=[];b.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),b=t}const P=new Set;let pe;function V(e,t){e&&e.i&&(P.delete(e),e.i(t))}function ge(e,t,n,o){if(e&&e.o){if(P.has(e))return;P.add(e),pe.c.push(()=>{P.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function ye(e,t){e.d(1),t.delete(e.key)}function we(e,t,n,o,r,i,s,c,l,a,y,d){let f=e.length,m=i.length,h=f;const q={};for(;h--;)q[e[h].key]=h;const O=[],M=new Map,L=new Map,z=[];for(h=m;h--;){const u=d(r,i,h),_=n(u);let p=s.get(_);p?o&&z.push(()=>p.p(u,t)):(p=a(_,u),p.c()),M.set(_,O[h]=p),_ in q&&L.set(_,Math.abs(h-q[_]))}const K=new Set,G=new Set;function B(u){V(u,1),u.m(c,y),s.set(u.key,u),y=u.first,m--}for(;f&&m;){const u=O[m-1],_=e[f-1],p=u.key,v=_.key;u===_?(y=u.first,f--,m--):M.has(v)?!s.has(p)||K.has(p)?B(u):G.has(v)?f--:L.get(p)>L.get(v)?(G.add(p),B(u)):(K.add(v),f--):(l(_,s),f--)}for(;f--;){const u=e[f];M.has(u.key)||l(u,s)}for(;m;)B(O[m-1]);return E(z),O}function $e(e){e&&e.c()}function re(e,t,n,o){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),o||F(()=>{const s=e.$$.on_mount.map(X).filter(Y);e.$$.on_destroy?e.$$.on_destroy.push(...s):E(s),e.$$.on_mount=[]}),i.forEach(F)}function oe(e,t){const n=e.$$;n.fragment!==null&&(_e(n.after_update),E(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function be(e,t){e.$$.dirty[0]===-1&&($.push(e),he(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function se(e,t,n,o,r,i,s,c=[-1]){const l=S;x(e);const a=e.$$={fragment:null,ctx:[],props:i,update:N,not_equal:r,bound:H(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:H(),dirty:c,skip_bound:!1,root:t.target||l.$$.root};s&&s(a.root);let y=!1;if(a.ctx=n?n(e,t.props||{},(d,f,...m)=>{const h=m.length?m[0]:f;return a.ctx&&r(a.ctx[d],a.ctx[d]=h)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](h),y&&be(e,d)),f}):[],a.update(),y=!0,E(a.before_update),a.fragment=o?o(a.ctx):!1,t.target){if(t.hydrate){const d=ae(t.target);a.fragment&&a.fragment.l(d),d.forEach(D)}else a.fragment&&a.fragment.c();t.intro&&V(e.$$.fragment),re(e,t.target,t.anchor,t.customElement),ne()}x(l)}class ie{$destroy(){oe(this,1),this.$destroy=N}$on(t,n){if(!Y(n))return N;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!ce(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const xe=e=>new Promise((t,n)=>{const{dbName:o,dbVersion:r,storeName:i,initialData:s}=e,c=window.indexedDB.open(o,r);c.onerror=()=>{n(new Error("Database error"))},c.onupgradeneeded=l=>{const a=l.target.result;if(!a.objectStoreNames.contains(i)){const d=a.createObjectStore(i,{keyPath:"id",autoIncrement:!0});s.length&&s.forEach(f=>{d.add(f)})}},c.onsuccess=l=>{const a=l.target.result;t(a)}}),I={dbName:"todoDb",dbVersion:1,storeName:"todoStore",initialData:[{title:"make todo app",parent:null,is_done:!0},{title:"deploy to github pages",parent:null,is_done:!0},{title:"take a nap",parent:null,is_done:!1}]},k=async(e="readonly")=>(await xe(I)).transaction([I.storeName],e).objectStore(I.storeName),Ne={async getAll(){const e=await k();return new Promise((t,n)=>{const o=e.getAll();o.onsuccess=()=>t(o.result),o.onerror=()=>n(o.error)})},async create(e){const t=await k("readwrite");return new Promise((n,o)=>{const r=t.add(e);r.onsuccess=()=>n(r.result),r.onerror=()=>o(r.error)})},async patch(e,t){const n=await k("readwrite");return new Promise((o,r)=>{const i=n.get(e);i.onsuccess=()=>{const s=i.result;Object.entries(t).forEach(([l,a])=>{s[l]=a});const c=n.put(s);c.onsuccess=()=>o(c.result),c.onerror=()=>r(c.error)},i.onerror=()=>r(i.error)})},async setIsDone(e,t){return this.patch(e,{is_done:t})},async delete(e){const t=await k("readwrite");return new Promise((n,o)=>{const r=t.delete(e);r.onsuccess=()=>{n()},r.onerror=()=>o(r.error)})}};function U(e,t,n){const o=e.slice();return o[1]=t[n],o}function W(e,t){let n,o=t[1].title+"",r,i;return{key:e,first:null,c(){n=A("li"),r=ee(o),i=te(),this.first=n},m(s,c){R(s,n,c),j(n,r),j(n,i)},p(s,c){t=s,c&1&&o!==(o=t[1].title+"")&&le(r,o)},d(s){s&&D(n)}}}function Se(e){let t,n=[],o=new Map,r=e[0];const i=s=>s[1].id;for(let s=0;s<r.length;s+=1){let c=U(e,r,s),l=i(c);o.set(l,n[s]=W(l,c))}return{c(){t=A("ul");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,c){R(s,t,c);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(t,null)},p(s,[c]){c&1&&(r=s[0],n=we(n,c,i,1,s,r,o,t,ye,W,null,U))},i:N,o:N,d(s){s&&D(t);for(let c=0;c<n.length;c+=1)n[c].d()}}}function Ee(e,t,n){let{items:o}=t;return e.$$set=r=>{"items"in r&&n(0,o=r.items)},[o]}class Oe extends ie{constructor(t){super(),se(this,t,Ee,Se,Z,{items:0})}}function ve(e){let t,n,o,r,i;return r=new Oe({props:{items:e[0]}}),{c(){t=A("main"),n=A("h2"),n.textContent="Todo",o=te(),$e(r.$$.fragment),g(n,"font","bold"),g(n,"text","lg"),g(n,"m","b-2"),g(t,"max-w","md"),g(t,"h","full"),g(t,"m","x-auto"),g(t,"p","4"),g(t,"relative","~")},m(s,c){R(s,t,c),j(t,n),j(t,o),re(r,t,null),i=!0},p(s,[c]){const l={};c&1&&(l.items=s[0]),r.$set(l)},i(s){i||(V(r.$$.fragment,s),i=!0)},o(s){ge(r.$$.fragment,s),i=!1},d(s){s&&D(t),oe(r)}}}function ke(e,t,n){let o=[];return fe(async()=>{const r=await Ne.getAll();n(0,o=r),console.log("===~todos~===",o)}),[o]}class Pe extends ie{constructor(t){super(),se(this,t,ke,ve,Z,{})}}new Pe({target:document.getElementById("app")});
