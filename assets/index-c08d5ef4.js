(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function C(){}function ae(e){return e()}function ne(){return Object.create(null)}function O(e){e.forEach(ae)}function ue(e){return typeof e=="function"}function U(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ge(e){return Object.keys(e).length===0}function y(e,t){e.appendChild(t)}function F(e,t,n){e.insertBefore(t,n||null)}function I(e){e.parentNode&&e.parentNode.removeChild(e)}function E(e){return document.createElement(e)}function W(e){return document.createTextNode(e)}function D(){return W(" ")}function _e(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function pe(e){return Array.from(e.childNodes)}function fe(e,t){t=""+t,e.data!==t&&(e.data=t)}function $e(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,o,t),r}let j;function P(e){j=e}function de(){if(!j)throw new Error("Function called outside component initialization");return j}function ye(e){de().$$.on_mount.push(e)}function me(){const e=de();return(t,n,{cancelable:o=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=$e(t,n,{cancelable:o});return r.slice().forEach(i=>{i.call(e,s)}),!s.defaultPrevented}return!0}}const x=[],oe=[];let N=[];const re=[],we=Promise.resolve();let H=!1;function be(){H||(H=!0,we.then(he))}function J(e){N.push(e)}const K=new Set;let k=0;function he(){if(k!==0)return;const e=j;do{try{for(;k<x.length;){const t=x[k];k++,P(t),Ee(t.$$)}}catch(t){throw x.length=0,k=0,t}for(P(null),x.length=0,k=0;oe.length;)oe.pop()();for(let t=0;t<N.length;t+=1){const n=N[t];K.has(n)||(K.add(n),n())}N.length=0}while(x.length);for(;re.length;)re.pop()();H=!1,K.clear(),P(e)}function Ee(e){if(e.fragment!==null){e.update(),O(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(J)}}function ve(e){const t=[],n=[];N.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),N=t}const q=new Set;let b;function ke(){b={r:0,c:[],p:b}}function xe(){b.r||O(b.c),b=b.p}function S(e,t){e&&e.i&&(q.delete(e),e.i(t))}function A(e,t,n,o){if(e&&e.o){if(q.has(e))return;q.add(e),b.c.push(()=>{q.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function Ne(e,t){A(e,1,1,()=>{t.delete(e.key)})}function Se(e,t,n,o,r,s,i,c,l,a,_,f){let d=e.length,u=s.length,h=d;const v={};for(;h--;)v[e[h].key]=h;const w=[],R=new Map,V=new Map,Z=[];for(h=u;h--;){const m=f(r,s,h),p=n(m);let $=i.get(p);$?o&&Z.push(()=>$.p(m,t)):($=a(p,m),$.c()),R.set(p,w[h]=$),p in v&&V.set(p,Math.abs(h-v[p]))}const ee=new Set,te=new Set;function z(m){S(m,1),m.m(c,_),i.set(m.key,m),_=m.first,u--}for(;d&&u;){const m=w[u-1],p=e[d-1],$=m.key,T=p.key;m===p?(_=m.first,d--,u--):R.has(T)?!i.has($)||ee.has($)?z(m):te.has(T)?d--:V.get($)>V.get(T)?(te.add($),z(m)):(ee.add(T),d--):(l(p,i),d--)}for(;d--;){const m=e[d];R.has(m.key)||l(m,i)}for(;u;)z(w[u-1]);return O(Z),w}function Q(e){e&&e.c()}function M(e,t,n,o){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),o||J(()=>{const i=e.$$.on_mount.map(ae).filter(ue);e.$$.on_destroy?e.$$.on_destroy.push(...i):O(i),e.$$.on_mount=[]}),s.forEach(J)}function B(e,t){const n=e.$$;n.fragment!==null&&(ve(n.after_update),O(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Oe(e,t){e.$$.dirty[0]===-1&&(x.push(e),be(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function X(e,t,n,o,r,s,i,c=[-1]){const l=j;P(e);const a=e.$$={fragment:null,ctx:[],props:s,update:C,not_equal:r,bound:ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:ne(),dirty:c,skip_bound:!1,root:t.target||l.$$.root};i&&i(a.root);let _=!1;if(a.ctx=n?n(e,t.props||{},(f,d,...u)=>{const h=u.length?u[0]:d;return a.ctx&&r(a.ctx[f],a.ctx[f]=h)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](h),_&&Oe(e,f)),d}):[],a.update(),_=!0,O(a.before_update),a.fragment=o?o(a.ctx):!1,t.target){if(t.hydrate){const f=pe(t.target);a.fragment&&a.fragment.l(f),f.forEach(I)}else a.fragment&&a.fragment.c();t.intro&&S(e.$$.fragment),M(e,t.target,t.anchor,t.customElement),he()}P(l)}class Y{$destroy(){B(this,1),this.$destroy=C}$on(t,n){if(!ue(n))return C;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!ge(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const De=e=>new Promise((t,n)=>{const{dbName:o,dbVersion:r,storeName:s,initialData:i}=e,c=window.indexedDB.open(o,r);c.onerror=()=>{n(new Error("Database error"))},c.onupgradeneeded=l=>{const a=l.target.result;if(!a.objectStoreNames.contains(s)){const f=a.createObjectStore(s,{keyPath:"id",autoIncrement:!0});i.length&&i.forEach(d=>{f.add(d)})}},c.onsuccess=l=>{const a=l.target.result;t(a)}}),G={dbName:"todoDb",dbVersion:1,storeName:"todoStore",initialData:[{title:"make todo app",parent:null,is_done:!0},{title:"deploy to github pages",parent:null,is_done:!0},{title:"take a nap",parent:null,is_done:!1}]},L=async(e="readonly")=>(await De(G)).transaction([G.storeName],e).objectStore(G.storeName),se={async getAll(){const e=await L();return new Promise((t,n)=>{const o=e.getAll();o.onsuccess=()=>t(o.result),o.onerror=()=>n(o.error)})},async create(e){const t=await L("readwrite");return new Promise((n,o)=>{const r=t.add(e);r.onsuccess=()=>n(r.result),r.onerror=()=>o(r.error)})},async patch(e,t){const n=await L("readwrite");return new Promise((o,r)=>{const s=n.get(e);s.onsuccess=()=>{const i=s.result;Object.entries(t).forEach(([l,a])=>{i[l]=a});const c=n.put(i);c.onsuccess=()=>o(c.result),c.onerror=()=>r(c.error)},s.onerror=()=>r(s.error)})},async setIsDone(e,t){return this.patch(e,{is_done:t})},async delete(e){const t=await L("readwrite");return new Promise((n,o)=>{const r=t.delete(e);r.onsuccess=()=>{n()},r.onerror=()=>o(r.error)})}};function Pe(e){let t,n,o=e[0].title+"",r,s,i;return{c(){t=E("li"),n=E("button"),r=W(o),g(n,"class","bg-transparent")},m(c,l){F(c,t,l),y(t,n),y(n,r),s||(i=_e(n,"click",e[1]),s=!0)},p(c,[l]){l&1&&o!==(o=c[0].title+"")&&fe(r,o)},i:C,o:C,d(c){c&&I(t),s=!1,i()}}}function Ce(e,t,n){const o=me();let{item:r}=t;function s(){o("click",r)}return e.$$set=i=>{"item"in i&&n(0,r=i.item)},[r,s]}class je extends Y{constructor(t){super(),X(this,t,Ce,Pe,U,{item:0})}}function ie(e,t,n){const o=e.slice();return o[3]=t[n],o}function ce(e,t){let n,o,r,s;return o=new je({props:{item:t[3]}}),o.$on("click",t[1]),{key:e,first:null,c(){n=E("li"),Q(o.$$.fragment),r=D(),this.first=n},m(i,c){F(i,n,c),M(o,n,null),y(n,r),s=!0},p(i,c){t=i;const l={};c&1&&(l.item=t[3]),o.$set(l)},i(i){s||(S(o.$$.fragment,i),s=!0)},o(i){A(o.$$.fragment,i),s=!1},d(i){i&&I(n),B(o)}}}function Ae(e){let t,n=[],o=new Map,r,s=e[0];const i=c=>c[3].id;for(let c=0;c<s.length;c+=1){let l=ie(e,s,c),a=i(l);o.set(a,n[c]=ce(a,l))}return{c(){t=E("ul");for(let c=0;c<n.length;c+=1)n[c].c()},m(c,l){F(c,t,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null);r=!0},p(c,[l]){l&3&&(s=c[0],ke(),n=Se(n,l,i,1,c,s,o,t,Ne,ce,null,ie),xe())},i(c){if(!r){for(let l=0;l<s.length;l+=1)S(n[l]);r=!0}},o(c){for(let l=0;l<n.length;l+=1)A(n[l]);r=!1},d(c){c&&I(t);for(let l=0;l<n.length;l+=1)n[l].d()}}}function Ie(e,t,n){const o=me();let{items:r}=t;function s(i){o("itemtoggle",i.detail)}return e.$$set=i=>{"items"in i&&n(0,r=i.items)},[r,s]}class le extends Y{constructor(t){super(),X(this,t,Ie,Ae,U,{items:0})}}function Te(e){let t,n,o,r=(console.log(e[1]),""),s,i,c,l,a,_,f,d;return c=new le({props:{items:e[1]}}),c.$on("itemtoggle",e[2]),f=new le({props:{items:e[0]}}),f.$on("itemtoggle",e[2]),{c(){t=E("main"),n=E("h2"),n.textContent="Todo",o=D(),s=W(r),i=D(),Q(c.$$.fragment),l=D(),a=E("h2"),a.textContent="Done",_=D(),Q(f.$$.fragment),g(n,"font","bold"),g(n,"text","lg"),g(n,"m","b-2"),g(a,"font","bold"),g(a,"text","lg"),g(a,"m","b-2"),g(t,"max-w","md"),g(t,"h","full"),g(t,"m","x-auto"),g(t,"p","4"),g(t,"relative","~")},m(u,h){F(u,t,h),y(t,n),y(t,o),y(t,s),y(t,i),M(c,t,null),y(t,l),y(t,a),y(t,_),M(f,t,null),d=!0},p(u,[h]){(!d||h&2)&&r!==(r=(console.log(u[1]),""))&&fe(s,r);const v={};h&2&&(v.items=u[1]),c.$set(v);const w={};h&1&&(w.items=u[0]),f.$set(w)},i(u){d||(S(c.$$.fragment,u),S(f.$$.fragment,u),d=!0)},o(u){A(c.$$.fragment,u),A(f.$$.fragment,u),d=!1},d(u){u&&I(t),B(c),B(f)}}}function Le(e,t,n){let o,r,s=[];ye(()=>{i()});async function i(){const l=await se.getAll();n(3,s=l)}async function c(l){const a=l.detail;console.log("===~item.id, item.is_done~===",a.id,a.is_done),await se.setIsDone(a.id,!a.is_done),i()}return e.$$.update=()=>{e.$$.dirty&8&&n(1,o=s.filter(l=>!l.is_done)),e.$$.dirty&8&&n(0,r=s.filter(l=>l.is_done))},[r,o,c,s]}class qe extends Y{constructor(t){super(),X(this,t,Le,Te,U,{})}}new qe({target:document.getElementById("app")});
